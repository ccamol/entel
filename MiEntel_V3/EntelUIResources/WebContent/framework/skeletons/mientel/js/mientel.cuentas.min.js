/*
 * cuentas.js
 */
$(document).ready(function(){var opcionSelect=readCookie("opcion");if(opcionSelect){var tipo=opcionSelect.split('_')[0];var nivelAcceso=opcionSelect.split('_')[1];if(((tipo=="ss")||(tipo=="cc"))&&(nivelAcceso=="titular")){$(".email_factura").show();$(".direccion_factura").show();}else{$(".email-factura").hide();$(".direccion_factura").hide();}}$('.verTrafico').click(function(){$(this).hide();$('#tabla_trafico').show();return false;});$('.tabla-permisos-modificar').find('a').click(function(){var td=$(this).parent().parent().parent().parent();var menu=td.find('.tabla-permisos-estado-menu');var trCss=$(this).parent().parent().parent().parent().next().css('paddingTop');if(!menu.is(':visible')){menu.show();td.parent().addClass('top');$(this).html('Cancelar');$(this).parent().addClass('modificar');$(this).parent().parent().parent().parent().next().css('paddingTop','9px');}else{menu.hide();td.parent().removeClass('top');$(this).html('Modificar');$(this).parent().removeClass('modificar');$(this).parent().parent().parent().parent().next().css('paddingTop',trCss);}return false;});});function cambiarEstado(el,estado){var ico,txt;switch(estado){case'total':ico="ico_verde";bg="ico_verde_b";txt="Permiso Total";op0="menu_total";op1="menu_consulta";op2="menu_parcial";break;case'parcial':ico="ico_azul";bg="ico_azul_b";txt="Permiso Parcial";op0="menu_parcial";op1="menu_consulta";op2="menu_total";break;case'consulta':ico="ico_amarillo";bg="ico_amarillo_b";txt="Solo Consulta";op0="menu_consulta";op1="menu_total";op2="menu_parcial";break;}var el=$(el).parent().parent().parent();el.find('.tabla-permisos-estado-menu').hide();el.find('.tabla-permisos-estado').hide();el.find('.estado-confirmar').show();el.parent().css('padding',0);var txtPrev=$(el).parent().parent().parent().find('.estado span').eq(1).html();el.find('.estado-confirmar').find('.prev').html(txtPrev);el.find('.estado-confirmar').find('strong').html(txt);el.find('.estado-confirmar').removeClass().addClass('estado-confirmar').addClass(bg);el.find('.estado-confirmar').find('a.btnCancelar').click(function(){el.find('.estado-confirmar').hide();el.find('.tabla-permisos-estado').show();el.parent().css('padding','15px 0 0 10px');el.find('.tabla-permisos-modificar').removeClass('modificar');el.find('.tabla-permisos-modificar a').html('Modificar');el.parent().removeClass('top');return false;});el.find('.estado-confirmar').find('a.btnAzul').click(function(){el.find('.estado span').get(0).className="icono "+ico;el.find('.estado span').eq(1).html(txt);el.find('.estado-confirmar').hide();el.find('.tabla-permisos-estado').show();el.parent().css('padding','15px 0 0 10px');el.find('.tabla-permisos-modificar').removeClass('modificar');el.find('.tabla-permisos-modificar a').html('Modificar');el.parent().removeClass('top');el.find('.'+op0).hide();el.find('.'+op1).show();el.find('.'+op2).show();return false;});return false;}


/*
 * cuentasMisDatos.js
 */
$(document).ready(function(){$('select.selectBoxAmarillo').selectBoxAmarillo();zIndex=500;$('.mis-datos-fila').each(function(){$(this).css({position:'relative',zIndex:zIndex--});});$('ul.tabs').find('li:not(li.linkModificar)').each(function(){$(this).find('a').click(function(){var linkModificar=$(this).parents('ul.tabs:first').find('li.linkModificar a');if(linkModificar.hasClass('activo')){linkModificar.trigger('click');}$(this).parents('ul.tabs:first').find('li:not(li.linkModificar)').removeClass('seleccionado');$(this).parents('li:first').addClass('seleccionado');var identificador=$(this).attr('href').toString();$(this).parents('ul.tabs:first').find('li:not(li.linkModificar)').find('a').each(function(){var tempID=$(this).attr('href').toString();if(tempID!=identificador){$(tempID).removeClass('oculto').hide();}else{$(tempID).removeClass('oculto').show();}});return false;});});$('.mis-datos-info').find('a.modificar').click(function(){if($(this).hasClass('activo')){$(this).text('Modificar').removeClass('activo');$(this).parents('.mis-datos-info').removeClass('modoEdicion').find('.campo').each(function(){$(this).find('strong').show().end().find('.campo-amarillo').hide();});$(this).parents('.mis-datos-info').find('.mis-datos-guardar').hide();$('#globoError').hide();}else{$(this).text('Cancelar').addClass('activo');$(this).parents('.mis-datos-info').addClass('modoEdicion').find('.campo').each(function(){var inputVal=$(this).find('strong:first').hide().text();$(this).find('input:not(:radio)').val(inputVal).end().find('.campo-amarillo').show();});$(this).parents('.mis-datos-info').find('.mis-datos-guardar').show().click(function(){var form=$(this).parents('form');if($('form#'+form.attr('id')).valid()){$(this).parents('.mis-datos-info:first').find('.campo').each(function(){var inputVal=$(this).find('input:checked').val()||$(this).find('.campo-amarillo input').val()||$(this).find('.campo-amarillo input:not(:radio), .campo-amarillo input:checked, .campo-amarillo select').val()||$(this).find('.campo-amarillo span, .campo-amarillo strong').text();$(this).find('strong').html(inputVal).show().end().find('.campo-amarillo').hide();});$(this).parents('.mis-datos-info:first').removeClass('modoEdicion').find('a.modificar').text('Modificar').removeClass('activo').end();$(this).parents('.mis-datos-info:first').find('.mis-datos-guardar').hide();$('#globoError').fadeOut();}return false;});}return false;});});function soloNumeros(evt){var key=evt.keyCode?evt.keyCode:evt.which;return(key<=31||(key>=48&&key<=57));}function soloLetras(evt){var key=evt.keyCode?evt.keyCode:evt.which;return(key<=31||(key>=65&&key<=90)||(key>=97&&key<=122)||(key==209||key==241)||(key==225||key==193)||(key==233||key==201)||(key==237||key==205)||(key==243||key==211)||(key==250||key==218));}


/*
 * cuentasMisDatosValidacion.js
 */
var timerGlobo;$(document).ready(function(){var $globo=$('<div id="globoError" class="globoError mensaje"><table><tr><td class="body">msg</td></tr></table></div>').css({top:"-999px",left:"-999px",position:'absolute'}).appendTo('body');$('#globoError').hide();$('input').keypress(function(){$('#globoError').fadeOut();});jQuery.validator.addMethod('fecha',function(value,element,params){if(!$(element).val()||(/^[0-9]{2}\/[0-9]{2}\/[0-9]{4}/.test(element.value))){return check_date(element.value);}return false;},'Ingresa una fecha de nacimiento válida.');$("form#formulario-datos-personales").validate({onkeyup:false,onfocusout:false,rules:{nombre_1:{required:true,minlength:2},apellido_1:{required:true,minlength:2},apellido_2:{required:true,minlength:2},fecha_nacimiento:{required:true,minlength:10,fecha:true}},messages:{nombre_1:{required:"Ingresa un nombre.",minlength:"Ingresa un nombre."},apellido_1:{required:"Ingresa tu primer apellido.",minlength:"Ingresa tu primer apellido."},apellido_2:{required:"Ingresa tu segundo apellido.",minlength:"Ingresa tu segundo apellido."},fecha_nacimiento:{required:"Ingresa tu fecha de nacimiento en la forma DD/MM/AAAA.",minlength:"Ingresa tu fecha de nacimiento en la forma DD/MM/AAAA."}},errorPlacement:function(error,element){var $form=element.parents('form');var firstError=$form.validate().errorList[0].message;$('#globoError').find('td:first').html(firstError);showGlobo($form.validate().errorList[0].element);}});$("form#formDatosEmail").validate({onkeyup:false,onfocusout:false,rules:{email:{required:true,email:true,minlength:5},email2:{required:true,email:true,minlength:5,equalTo:'#email'}},messages:{email:{required:"Ingresa un email válido.",minlength:"Ingresa un email válido.",email:"Ingresa un email válido."},email2:{required:"Ingresa un email válido.",minlength:"Ingresa un email válido.",email:"Ingresa un email válido.",equalTo:"Emails no coinciden."}},errorPlacement:function(error,element){var $form=element.parents('form');var firstError=$form.validate().errorList[0].message;$('#globoError').find('td:first').html(firstError);showGlobo($form.validate().errorList[0].element);}});$("form#formulario-direccion-promociones").validate({onkeyup:false,onfocusout:false,rules:{calle:{required:true,minlength:2},numero:{required:true,minlength:1}},messages:{calle:{required:"Ingresa una calle.",minlength:"Ingresa una calle."},numero:{required:"Ingresa un número.",minlength:"Ingresa un número."}},errorPlacement:function(error,element){var $form=element.parents('form');var firstError=$form.validate().errorList[0].message;$('#globoError').find('td:first').html(firstError);showGlobo($form.validate().errorList[0].element);}});$("form#formDireccionFactura").validate({onkeyup:false,onfocusout:false,rules:{direccion:{required:true,minlength:4}},messages:{direccion:{required:"Ingresa una dirección.",minlength:"Ingresa una dirección."}},errorPlacement:function(error,element){var $form=element.parents('form');var firstError=$form.validate().errorList[0].message;$('#globoError').find('td:first').html(firstError);showGlobo($form.validate().errorList[0].element);}});$("form#formulario-otros-datos").validate({onkeyup:false,onfocusout:false,rules:{fono_prefijo:{minlength:2},fono:{required:function(){return($('input[name=fono_prefijo]').val().length>0);},minlength:6}},messages:{fono_prefijo:{required:"Ingresa un prefijo.",minlength:"Ingresa un prefijo de 2 números."},fono:{required:"Ingresa un teléfono.",minlength:"Ingresa un teléfono."}},errorPlacement:function(error,element){var $form=element.parents('form');var firstError=$form.validate().errorList[0].message;$('#globoError').find('td:first').html(firstError);new showGlobo($form.validate().errorList[0].element);}});});function showGlobo(el){var $input=$(el).parents('.campo:first');var punto=$input.offset();var $globo=$('#globoError');if($globo.is(':hidden')){$globo.fadeIn(200,function(){$(el).focus();});}$globo.css({'top':$input.offset().top+parseInt($input.height())/2-parseInt($globo.css('height'))/2,'left':$input.offset().left+parseInt($input.width())+5});$(window).resize(function(){$globo.css({'top':$input.offset().top+parseInt($input.height())/2-parseInt($globo.css('height'))/2,'left':$input.offset().left+parseInt($input.width())+5});});return false;}function check_date(value){var checkstr="0123456789";var Datevalue="";var DateTemp="";var seperator="/";var day;var month;var year;var maxYear=2009;var leap=0;var err=0;var i;err=0;DateValue=value;for(i=0;i<DateValue.length;i++){if(checkstr.indexOf(DateValue.substr(i,1))>=0){DateTemp=DateTemp+DateValue.substr(i,1);}}DateValue=DateTemp;if(DateValue.length==6){DateValue=DateValue.substr(0,4)+'20'+DateValue.substr(4,2);}if(DateValue.length!=8){err=19;}year=DateValue.substr(4,4);if(year==0){err=20;}if(year>maxYear){return false;}month=DateValue.substr(2,2);if((month<1)||(month>12)){err=21;}day=DateValue.substr(0,2);if(day<1){err=22;}if((year%4==0)||(year%100==0)||(year%400==0)){leap=1;}if((month==2)&&(leap==1)&&(day>29)){err=23;}if((month==2)&&(leap!=1)&&(day>28)){err=24;}if((day>31)&&((month=="01")||(month=="03")||(month=="05")||(month=="07")||(month=="08")||(month=="10")||(month=="12"))){err=25;}if((day>30)&&((month=="04")||(month=="06")||(month=="09")||(month=="11"))){err=26;}if((day==0)&&(month==0)&&(year==00)){err=0;day="";month="";year="";seperator="";}if(err==0){return true;}else{return false;}}


/*
 * cuentasClaveValidacion.js
 */
$(document).ready(function(){$('input.inputBox').inputBox();var $globo=$('<div id="globoError" class="globoError mensaje"><table><tr><td class="body">msg</td></tr></table></div>').css({top:"-999px",left:"-999px"}).appendTo('body');$('#globoError').hide();$('input').keypress(function(){$('#globoError').fadeOut();if($(this).get(0).disableError)$(this).get(0).disableError();});$("form").each(function(){$(this).validate({onkeyup:false,onfocusout:false,rules:{claveActual:{required:true,minlength:4},nuevaClave:{required:true,minlength:4},nuevaClave2:{required:true,equalTo:'#nuevaClave',minlength:4}},messages:{claveActual:{required:"Ingresa tu clave actual.",minlength:"La clave debe ser de 4 d&iacute;gitos."},nuevaClave:{required:"Ingresa tu nueva clave.",minlength:"La clave debe ser de 4 d&iacute;gitos."},nuevaClave2:{required:"Reingresa tu nueva clave.",equalTo:"Tus nuevas claves no coinciden.",minlength:"La clave debe ser de 4 d&iacute;gitos."}},errorPlacement:function(error,element){var $form=element.parents('form');var firstError=$form.validate().errorList[0].message;$('#globoError').find('td:first').html(firstError);showGlobo($form.validate().errorList[0].element);}});});$("form").each(function(i){$(this).find('input').click(function(){if($(this).parents('form').validate().toShow.length==0){$('#globoError').fadeOut(200);}});});$(".guardar_clave a").click(function(){if($("form").valid()){$('#clave_cambiada').slideDown(250);$('input[name=claveActual], input[name=nuevaClave], input[name=nuevaClave2]').val('');}});});function showGlobo(el){pintaCampoRojo(el);var $input=$(el).parents('.campo:first');var punto=$input.offset();var $globo=$('#globoError');punto.left+=parseInt($input.width())+5;punto.top+=parseInt($input.height())/2-parseInt($globo.css('height'))/2;if($globo.is(':hidden')){$globo.fadeIn(200,function(){$(el).focus();});}$globo.css({'top':punto.top,'left':punto.left});return false;}function soloNumeros(evt){var key=evt.keyCode?evt.keyCode:evt.which;return(key<=31||(key>=48&&key<=57));}